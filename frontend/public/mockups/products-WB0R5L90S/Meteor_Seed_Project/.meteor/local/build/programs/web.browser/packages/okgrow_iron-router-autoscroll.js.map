)]}'
{"version":3,"sources":["okgrow:iron-router-autoscroll/client/iron-router-autoscroll.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,wB;AACA,yB;AACA,E;;AAEA,yB;AACA,mB;;AAEA,yE;AACA,kC;AACA,8E;AACA,2B;AACA,sC;AACA,2D;AACA,E;;AAEA,qC;AACA,uE;AACA,c;AACA,oD;AACA,E;;AAEA,yE;AACA,kE;AACA,uD;AACA,+B;AACA,+B;AACA,kB;AACA,c;;AAEA,qB;AACA,2E;AACA,oC;AACA,sC;AACA,mB;;AAEA,2B;AACA,kC;AACA,8B;AACA,kC;AACA,wC;AACA,O;AACA,Y;AACA,qB;AACA,O;;AAEA,8B;AACA,2B;AACA,iD;AACA,O;AACA,G;AACA,E;;AAEA,6B;AACA,2D;AACA,mD;AACA,Q;AACA,qB;AACA,mG;AACA,G;AACA,C","file":"/packages/okgrow_iron-router-autoscroll.js","sourcesContent":["IronRouterAutoscroll = {\n  animationDuration: 200,\n};\n\nvar scrollPositions = {};\nvar backToPosition;\n\n// Keep track of the last position for every page in case we return to it\n// via the back button or history.\n// TODO we should probably be keeping this in history.state rather than having\n// a scrollPositions object\nvar saveScrollPosition = function () {\n  scrollPositions[window.location] = $(window).scrollTop();\n};\n\nwindow.onpopstate = function(event) {\n  // We used the back button, find the position we were at on that page\n  // last time\n  backToPosition = scrollPositions[window.location];\n};\n\n// Scroll to the right place after changing routes. \"The right place\" is:\n// 1. The previous position if we're returning via the back button\n// 2. The element whose id is specified in the URL hash\n// 3. The top of page otherwise\nvar scrollToTop = function () {\n  var self = this;\n  self.next();\n\n  if (self.ready()) {\n    // defer until after the DOM update so that the position can be correct\n    Tracker.afterFlush(function () {\n      var hash = window.location.hash;\n      var position;\n\n      if (backToPosition) {\n        position = backToPosition;\n        backToPosition = null;\n      } else if ($(hash).length) {\n        position = $(hash).offset().top;\n      }\n      else {\n        position = 0;\n      }\n\n      $('body,html').animate({\n        scrollTop: position\n      }, IronRouterAutoscroll.animationDuration);\n    });\n  }\n};\n\nif (Package['iron:router']) {\n  Package['iron:router'].Router.onStop(saveScrollPosition);\n  Package['iron:router'].Router.onRun(scrollToTop);\n} else {\n  if (console.warn) {\n    console.warn(\"The okgrow:iron-router-autoscroll package requires iron:router, please add it.\");\n  }\n}\n"]}